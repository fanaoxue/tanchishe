var Tools={getRandom:function(b,a){return Math.floor(Math.random()*(a-b+1))+b}};(function(d,e){var b=[];function c(f){f=f||{};this.width=f.width||20;this.height=f.height||20;this.color=f.color||"green";this.x=f.x||0;this.y=f.y||0}c.prototype.render=function(f){a();var g=document.createElement("div");b.push(g);g.style.position="absolute";g.style.width=this.width+"px";g.style.height=this.height+"px";g.style.backgroundColor=this.color;this.x=Tools.getRandom(0,f.offsetWidth/this.width-1)*this.width;this.y=Tools.getRandom(0,f.offsetHeight/this.height-1)*this.height;g.style.left=this.x+"px";g.style.top=this.y+"px";f.appendChild(g)};function a(){for(var g=0,f=b.length;g<f;g++){b[g].parentNode.removeChild(b[g]);b.splice(g,1)}}d.Food=c})(window,undefined);(function(d,e){var b=[];function c(f){f=f||{};this.width=f.width||20;this.height=f.height||20;this.direction=f.direction||"right";this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"},]}c.prototype.render=function(g){a();for(var f=0;f<this.body.length;f++){var h=document.createElement("div");b.push(h);h.style.position="absolute";h.style.width=this.width+"px";h.style.height=this.height+"px";h.style.backgroundColor=this.body[f].color;h.style.left=this.body[f].x*this.width+"px";h.style.top=this.body[f].y*this.height+"px";g.appendChild(h)}};c.prototype.move=function(k,j){for(var g=this.body.length-1;g>0;g--){this.body[g].x=this.body[g-1].x;this.body[g].y=this.body[g-1].y}var f=this.body[0];switch(this.direction){case"right":f.x+=1;break;case"left":f.x-=1;break;case"top":f.y-=1;break;case"bottom":f.y+=1;break}if(f.x*this.width===k.x&&f.y*this.height===k.y){var h=this.body[this.body.length-1];this.body.push({x:h.x,y:h.y,color:h.color});k.render(j)}};function a(){for(var f=0;f<b.length;f++){b[f].parentNode.removeChild(b[f])}b=[]}d.Snake=c})(window,undefined);(function(b,e){var a;function f(){this.food=new Food();this.snake=new Snake();a=this}f.prototype.start=function(g){this.food.render(g);this.snake.render(g);this.map=g;d();c()};function d(){var g=setInterval(function(){a.snake.move(a.food,a.map);var i=a.snake.body[0];var h=i.x;var l=i.y;var k=a.map.offsetWidth/a.snake.width-1;var j=a.map.offsetHeight/a.snake.height-1;if(h<0||l<0){clearInterval(g);alert("game over");return}if(h>k||l>j){clearInterval(g);alert("game over");return}a.snake.render(a.map)},150)}function c(){document.onkeydown=function(g){console.log(g.keyCode);switch(g.keyCode){case 37:if(a.snake.direction==="right"){return}a.snake.direction="left";break;case 38:if(a.snake.direction==="bottom"){return}a.snake.direction="top";break;case 39:if(a.snake.direction==="left"){return}a.snake.direction="right";break;case 40:if(a.snake.direction==="top"){return}a.snake.direction="bottom";break}}}b.Game=f})(window,undefined);(function(){var a=document.getElementById("map");new Game().start(a)})();
